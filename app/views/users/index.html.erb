<div>
  <div>
    <h1>
      List of users
    </h1>
  </div>
</div>

<hr>

<div>
  <div>
    <table border="1">
      <tr>
        <th>
          Username
        </th>

        <th>
          Private?
        </th>

        <% if @current_user != nil %>
        <th>
          Follow to be edited
        </th>
        <% else %>
        <th>
        </th>
        <% end %>

        <th>
          
        </th>

      </tr>

      <% @list_of_users.each do |a_user| %>
      <tr>

        <td>
          <%= a_user.username %>
        </td>

        <td>
          <% if a_user.private == true  %>
          Yes
          <% else %>
          No
          <% end %>
        </td>

        <% if @current_user != nil %>
        <td>
          <% if @current_user.sender_follow_requests_accepted.include?(a_user.id) %>
              <a href="">
                Unfollow
              </a>
          <% elsif @current_user.sender_follow_requests_pending.include?(a_user.id)%>
            Request sent. Cancel
          <% elsif @current_user.sender_follow_requests_rejected.include?(a_user.id) %>
            Follow rejected
          <% else %>
            <form action="/insert_follow_request" method="post">
              <input type="hidden" name="query_sender_id" value="<%= @current_user.id %>">
              <input type="hidden" name="query_recipient_id" value="<%= a_user.id %>">
              <input type="hidden" name="query_status" value="accepted">
              <button>Follow</button>
            </form>
          <% end %>
        </td>
        <% else %>
        <td>
        </td>
        <% end %>

        <td>
          <a href="/users/<%= a_user.username %>">
            Show details
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>

<hr>
